---
title: "Practica02"
author: "Brian Sandoval"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(XML)
library(httr)
library(dplyr)
html <- GET("https://www.mediawiki.org/wiki/MediaWiki")
contenido <- content(html, as = "text")
parsedHtml <- htmlParse(contenido, asText = TRUE)
informacionA <- xpathSApply(parsedHtml, "//a", xmlValue)
links_text <- xpathSApply(parsedHtml, "//a", xmlValue)
links_url <- xpathSApply(parsedHtml, "//a", xmlGetAttr, 'href')
datos_matriz <- matrix(c(enlaces = links_text, URL = links_url), nrow = 177, ncol = 2)
tablaPrin <- as.data.frame(datos_matriz)
colnames(tablaPrin) <- c("Enlace","URL")
tablaPrin$Enlace[tablaPrin$Enlace == ""] <- NA
tablaPrin$Enlace[tablaPrin$Enlace == " "] <- NA
tablaPrin$Enlace[tablaPrin$Enlace == "\n\t\n\t\t\n"] <- NA
tablaPrin$Enlace[tablaPrin$Enlace == NULL] <- NA
tablaPrin
```

## Practica 02:

1\. Descargar la página web de la URL indicada, y almacenarlo en un formato de R apto para ser tratado.

RSPT: La web contienen la siguiente informacion: `r 
html <- GET("https://www.mediawiki.org/wiki/MediaWiki")
contenido <- content(html, as = "text")
`

```{r , echo=FALSE}
library(XML)
library(httr)
httr::GET("https://www.mediawiki.org/wiki/MediaWiki")
html <- GET("https://www.mediawiki.org/wiki/MediaWiki")
contenido <- content(html, as = "text")
parsedHtml <- htmlParse(contenido, asText = TRUE)
titulo <- xpathSApply(parsedHtml, "//title", xmlValue)
```

2\. Analizar el contenido de la web, buscando el título de la página (que en HTML se etiqueta como “title”).

RSPT: El título de la página es: `r 
html <- GET("https://www.mediawiki.org/wiki/MediaWiki")
contenido <- content(html, as = "text")
parsedHtml <- htmlParse(contenido, asText = TRUE)
titulo <- xpathSApply(parsedHtml, "//title", xmlValue)
titulo`

3\. Analizar el contenido de la web, buscando todos los enlaces (que en HTML se etiquetan como “a”), buscando el texto del enlace, así como la URL.

RSPT: La infromacion obtenida es: `r 
View(tablaPrin)`

```{r , echo=FALSE}
#tablaPrin
if (!require("htmlTable")) install.packages("htmlTable")
#tablaPrin$Enlace[tablaPrin$Enlace == ""] <- NA
#tablaPrin$Enlace[tablaPrin$Enlace == " "] <- NA
#tablaPrin$Enlace[tablaPrin$Enlace == "\n\t\n\t\t\n"] <- NA
#tablaPrin$Enlace[tablaPrin$Enlace == NULL] <- NA
pruebaTabla <- tablaPrin
mostrarTabla <- htmlTable(pruebaTabla)
#mostrartabla
```

4\. Generar una tabla con cada enlace encontrado, indicando el texto que acompaña el enlace, y el número de veces que aparece un enlace con ese mismo objetivo.
```{r , echo=FALSE}
#Juan y Luis

```

5\. Para cada enlace, seguirlo e indicar si está activo (podemos usar el código de status HTTP al hacer una petición a esa URL).

```{r , echo=FALSE}
tabla5 <- tablaPrin
limpiaURL <- grepl("^wiki/", tabla5)
prueba5 <- ifelse(limpiaURL, paste0("https://www.mediawiki.org/wiki/ ", tabla5), tabla5)
print(prueba5)
```

## Pregunta 02:
